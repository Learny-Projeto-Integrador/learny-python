WindowManager:
    TelaLogin:
    TelaCadastro:
    TelaSelecionarImagem:
    TelaBemVindo:
    TelaHome:

<TelaLogin>:
    name: "TelaLogin"
    MDFloatLayout:
        # Adiciona a imagem de fundo
        canvas.before:
            Rectangle:
                source: 'assets/imagens/fundo-gradiente.png'  # Caminho da sua imagem de fundo
                size: self.size
                pos: self.pos

        # Logo
        Image:
            source: 'assets/imagens/logo-learny.png'
            size_hint: (0.5, 0.3)
            pos_hint: {'center_x': 0.5, 'top': 0.9}

        # Agrupando os Títulos em um BoxLayout
        MDBoxLayout:
            orientation: 'vertical'
            size_hint: 0.8, None  # Ajusta o tamanho horizontal e define altura com base no conteúdo
            height: self.minimum_height
            spacing: 10
            pos_hint: {'center_x': 0.5, 'top': 0.65}

            MDLabel:
                text: "Entre na sua conta\n Learny"
                font_name: "assets/fontes/montserrat/Montserrat-Bold.ttf"
                font_size: "24sp"
                halign: "center"
                theme_text_color: "Custom"
                text_color: (1, 1, 1, 1)
                size_hint_y: None
                height: self.texture_size[1]

            MDLabel:
                text: "Faça login com suas informações de\n cadastro"
                font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
                font_size: "18sp"
                halign: "center"
                theme_text_color: "Custom"
                text_color: (1, 1, 1, 1)
                size_hint_y: None
                height: self.texture_size[1]

        # Campos de texto agrupados em BoxLayout
        MDBoxLayout:
            orientation: 'vertical'
            size_hint: 0.8, None
            height: 80
            spacing: 20
            pos_hint: {'center_x': 0.5, 'top': 0.45}

            MDTextField:
                id: txt_usuario
                mode: "round"
                hint_text: "Usuário"
                helper_text_mode: "persistent"
                icon_left: "account"
                line_color_normal: 1, 1, 1, 1  # Cor da borda quando o campo não está focado (branco)

            MDTextField:
                id: txt_senha
                mode: "round"
                hint_text: "Senha"
                password: True  # Campo de senha
                helper_text_mode: "persistent"
                icon_left: "lock"  # Ícone de cadeado
                line_color_normal: 1, 1, 1, 1  # Cor da borda quando o campo não está focado (branco)

        # Botão Entrar fora do BoxLayout, mas no FloatLayout
        MDIconButton:
            id: btn_entrar
            text: 'Entrar'
            icon: "assets/imagens/icon-confirmar.png"
            icon_size: "50sp"
            pos_hint: {'center_x': 0.5, 'top': 0.32}
            on_press: root.on_enter_button_click()

        # Seção de cadastro agrupada em um BoxLayout
        MDBoxLayout:
            orientation: 'horizontal'
            size_hint: None, None
            size: self.minimum_size
            height: '40dp'
            spacing: 10
            pos_hint: {'center_x': 0.5, 'top': 0.2}

            MDLabel:
                text: "Sem uma conta?"
                font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
                font_size: "15sp"
                halign: 'left'
                size_hint_x: None
                width: '150dp'
                theme_text_color: "Custom"
                text_color: (1, 1, 1, 1)

            MDTextButton:
                id: btn_cadastro
                text: "Comece aqui"
                font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
                font_size: "15sp"
                size_hint: None, None
                width: 140
                height: 25
                on_press:
                    root.manager.current = "TelaCadastro"
                    root.manager.transition.direction = "left"
                theme_text_color: "Custom"
                text_color: (1, 1, 1, 1)



<TelaCadastro>:
    name: "TelaCadastro"
    MDFloatLayout:
        # Adiciona a imagem de fundo
        canvas.before:
            Rectangle:
                source: 'assets/imagens/fundo-gradiente.png'  # Caminho da sua imagem de fundo
                size: self.size
                pos: self.pos

        # Agrupando os Títulos em um BoxLayout
        MDBoxLayout:
            orientation: 'vertical'
            size_hint: 0.8, None  # Ajusta o tamanho horizontal e define altura com base no conteúdo
            height: self.minimum_height
            spacing: 10
            pos_hint: {'center_x': 0.5, 'top': 0.83}

            MDLabel:
                text: "Tela de Cadastro"
                font_name: "assets/fontes/montserrat/Montserrat-Bold.ttf"
                font_size: "24sp"
                halign: "center"
                theme_text_color: "Custom"
                text_color: (1, 1, 1, 1)
                size_hint_y: None
                height: self.texture_size[1]

        Button:
            id: image_button  # Adicione um id para referenciar esse botão
            text: "+"  # Começa com o texto +
            size_hint: (0.28, 0.18)
            font_name: "assets/fontes/montserrat/Montserrat-Bold.ttf"
            font_size: 50
            color: (0.93, 0.35, 0.41, 1)  # Cor do texto
            pos_hint: {'center_x': 0.5, 'y': 0.58}
            background_normal: ""  # Deixa o fundo vazio inicialmente
            background_down: ""  # Define o estado pressionado sem imagem ainda
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Cor de fundo do botão
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]  # Bordas arredondadas
            on_press:
                root.manager.current = "TelaSelecionarImagem"
                root.manager.transition.direction = "left"

        # Campos de texto agrupados em BoxLayout
        MDBoxLayout:
            orientation: 'vertical'
            size_hint: 0.8, None
            spacing: 20
            pos_hint: {'center_x': 0.5, 'top': 0.42}

            MDTextField:
                id: txt_usuario_cadastro
                mode: "round"
                hint_text: "Usuário"
                helper_text_mode: "persistent"
                line_color_normal: 1, 1, 1, 1  # Cor da borda quando o campo não está focado (branco)

            MDTextField:
                id: txt_senha_cadastro
                mode: "round"
                hint_text: "Senha"
                password: True  # Campo de senha
                helper_text_mode: "persistent"
                line_color_normal: 1, 1, 1, 1  # Cor da borda quando o campo não está focado (branco)
            
            MDTextField:
                id: txt_nome
                mode: "round"
                hint_text: "Nome"
                helper_text_mode: "persistent"
                line_color_normal: 1, 1, 1, 1  # Cor da borda quando o campo não está focado (branco)

            MDTextField:
                id: txt_data_nasc_cadastro
                mode: "round"
                hint_text: "Data de nascimento"
                helper_text_mode: "persistent"
                line_color_normal: 1, 1, 1, 1  # Cor da borda quando o campo não está focado (branco)

        # Botão Entrar fora do BoxLayout, mas no FloatLayout
        MDIconButton:
            id: btn_entrar
            text: 'Entrar'
            icon: "assets/imagens/icon-confirmar.png"
            icon_size: "50sp"
            pos_hint: {'center_x': 0.5, 'top': 0.27}
            # on_press: root.on_enter_button_click()

        # Seção de cadastro agrupada em um BoxLayout
        MDBoxLayout:
            orientation: 'horizontal'
            size_hint: None, None
            size: self.minimum_size
            height: '40dp'
            spacing: 10
            pos_hint: {'center_x': 0.5, 'top': 0.16}

            MDLabel:
                text: "Sem uma conta?"
                font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
                font_size: "15sp"
                halign: 'left'
                size_hint_x: None
                width: '150dp'
                theme_text_color: "Custom"
                text_color: (1, 1, 1, 1)

            MDTextButton:
                id: btn_cadastro
                text: "Comece aqui"
                font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
                font_size: "15sp"
                size_hint: None, None
                width: 140
                height: 25
                on_press:
                    root.manager.current = "TelaCadastro"
                    root.manager.transition.direction = "left"
                theme_text_color: "Custom"
                text_color: (1, 1, 1, 1)


<TelaSelecionarImagem>:
    id: seletor_imagem
    MDFloatLayout:
        # Adiciona a imagem de fundo
        canvas.before:
            Rectangle:
                source: 'assets/imagens/fundo-gradiente.png'  # Caminho da sua imagem de fundo
                size: self.size
                pos: self.pos

        Image:
            id: my_image
            source: ""
            size_hint: (0.6, 0.3)
            pos_hint: {'center_x': 0.5, 'top': 0.89}

        FileChooserIconView:
            id: filechooser
            path: 'C:/Users'  # Exemplo de caminho para a pasta de imagens do usuário
            filters: ['*.png', '*.jpg', '*.jpeg']  # Exibir apenas imagens PNG e JPEG
            size_hint: (0.9, 0.3)
            pos_hint: {'center_x': 0.5, 'y': 0.24}
            on_selection: seletor_imagem.mostrar_imagem(filechooser.selection)
        
        Button:
            text: "Selecionar"
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: 18
            size_hint: (None, None)
            width: 180
            height: 45
            pos_hint: {'center_x': 0.5, 'y': 0.16}
            on_press: seletor_imagem.selected(filechooser.selection)
        
        Button:
            text: "Voltar"
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: 18
            size_hint: (None, None)
            width: 180
            height: 45
            pos_hint: {'center_x': 0.5, 'y': 0.09}
            on_press:
                root.manager.current = "TelaCadastro"
                root.manager.transition.direction = "right"

<TelaBemVindo>:
    name: "TelaHome"
    FloatLayout:
        Image:
            source: 'assets/imagens/fundo-gradiente.png'
            allow_stretch: True
            keep_ratio: False
            size_hint: 1, 1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        Label:
            text: "Bem vindo(a),"
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: 22
            size_hint: (0.5, 0.2)
            halign: "center"
            pos_hint: {'center_x': 0.5, 'y': 0.51}

        Label:
            id: lbl_transicao
            text: ""
            font_name: "assets/fontes/montserrat/Montserrat-Bold.ttf"
            font_size: 28
            size_hint: (0.5, 0.2)
            halign: "center"
            pos_hint: {'center_x': 0.5, 'y': 0.42}


<TelaHome>:
    name: "TelaHome"
    FloatLayout:
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Cor branca (RGBA)
            Rectangle:
                pos: self.pos
                size: self.size