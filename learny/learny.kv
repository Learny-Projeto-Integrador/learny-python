WindowManager:
    TelaLogin:
    TelaCadastro:
    TelaSelecionarImagem:
    TelaBemVindo:
    TelaHome:

<TelaLogin>:
    name: "TelaLogin"
    MDBoxLayout:
        orientation: 'vertical'
        size_hint: 1, 1  # O MDBoxLayout cobre toda a tela
        padding: [60,0,60,0]
        spacing: 20

        # Adiciona a imagem de fundo
        canvas.before:
            Rectangle:
                source: 'assets/imagens/fundo-gradiente.png'  # Caminho da sua imagem de fundo
                size: self.size
                pos: self.pos

        # Logo
        MDBoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: '100dp'
            Image:
                source: 'assets/imagens/logo-learny.png'
                size_hint: (0.5, 0.5)
                pos_hint: {'center_x': 0.5}

        # Títulos
        MDBoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: '120dp'
            MDLabel:
                text: "Entre na sua conta\n Learny"
                font_name: "assets/fontes/montserrat/Montserrat-Bold.ttf"
                font_size: "24sp"
                halign: "center"

            MDLabel:
                text: "Faça login com suas informações de\n cadastro"
                font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
                font_size: "18sp"
                halign: "center"

        # Campos de texto
        MDBoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: '130dp'
            pos_hint: {'center_x': 0.5}
            spacing: 10

            MDTextField:
                id: txt_usuario
                hint_text: 'Usuário'
                font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
                font_size: "18sp"
                size_hint: 1, None
                height: '45dp'

            MDTextField:
                id: txt_senha
                hint_text: 'Senha'
                password: True
                font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
                font_size: "18sp"
                size_hint: 1, None
                height: '45dp'

        # Botão Entrar
        MDBoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: '40dp'
            MDRaisedButton:
                id: btn_entrar
                text: 'Entrar'
                font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
                font_size: "18sp"
                size_hint: None, None
                width: 180
                height: 45
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}  # Centraliza horizontal e verticalmente
                on_press: root.on_enter_button_click()


        # Cadastro
        MDBoxLayout:
            orientation: 'horizontal'
            size_hint: None, None  # Permite que o layout tenha um tamanho específico
            size: self.minimum_size  # O layout se ajusta ao tamanho mínimo dos filhos
            height: '40dp'
            spacing: 10  # Espaçamento pequeno entre os componentes
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}  # Centraliza o layout na tela

            MDLabel:
                text: "Sem uma conta?"
                font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
                font_size: "15sp"
                halign: 'left'
                size_hint_x: None  # Permite que a largura do Label seja fixa
                width: '150dp' # Ajusta a largura com base no texto

            MDFlatButton:
                id: btn_cadastro
                text: "Comece aqui"
                font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
                font_size: "15sp"
                size_hint: None, None
                width: 140
                height: 25
                on_press:
                    root.manager.current = "TelaCadastro"
                    root.manager.transition.direction = "left"



<TelaCadastro>:
    name: "TelaCadastro"
    FloatLayout:
        Image:
            source: 'assets/imagens/fundo-gradiente.png'
            allow_stretch: True
            keep_ratio: False
            size_hint: 1, 1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        Label:
            text: "Tela de Cadastro"
            font_name: "assets/fontes/montserrat/Montserrat-Bold.ttf"
            font_size: 28
            size_hint: (0.5, 0.2)
            halign: "center"
            pos_hint: {'center_x': 0.5, 'y': 0.70}
    
        Button:
            text: "+"
            size_hint: (0.28, 0.18)
            font_name: "assets/fontes/montserrat/Montserrat-Bold.ttf"
            font_size: 50
            color: (0.93, 0.35, 0.41, 1)  # Cor do texto
            pos_hint: {'center_x': 0.5, 'y': 0.57}
            background_color: 0, 0, 0, 0  # Transparente para desenharmos com o Canvas
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1  # Cor de fundo do botão
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15]  # Raio para bordas arredondadas
            on_press: 
                root.manager.current = "TelaSelecionarImagem"
                root.manager.transition.direction = "left"

        TextInput:
            id: txt_usuario_cadastro
            hint_text: 'Usuário'
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: self.height * 0.45
            size_hint: (None, None)
            width: 385
            height: 45
            valign: 'middle'  # Centraliza o texto verticalmente
            multiline: False  # Para garantir que o texto fique em uma linha só
            padding: [10, (self.height - self.line_height) / 2]  # Padding para ajustar o texto verticalmente
            pos_hint: {'center_x': 0.5, 'y': 0.48}

        TextInput:
            id: txt_senha_cadastro
            hint_text: 'Senha'
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: self.height * 0.45
            size_hint: (None, None)
            width: 385
            height: 45
            valign: 'middle'  # Centraliza o texto verticalmente
            multiline: False  # Para garantir que o texto fique em uma linha só
            password: True
            padding: [10, (self.height - self.line_height) / 2]  # Padding para ajustar o texto verticalmente
            pos_hint: {'center_x': 0.5, 'y': 0.41}
        
        TextInput:
            id: txt_data_nasc_cadastro
            hint_text: 'Data de nascimento'
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: self.height * 0.45
            size_hint: (None, None)
            width: 385
            height: 45
            valign: 'middle'  # Centraliza o texto verticalmente
            multiline: False  # Para garantir que o texto fique em uma linha só
            padding: [10, (self.height - self.line_height) / 2]  # Padding para ajustar o texto verticalmente
            pos_hint: {'center_x': 0.5, 'y': 0.34}

        Button:
            id: btn_cadastrar
            text: 'Cadastrar'
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: 18
            size_hint: (None, None)
            width: 180
            height: 45
            pos_hint: {'center_x': 0.5, 'y': 0.24}
            on_press: root.on_register_button_click()

        Label:
            text: "Possui uma conta?"
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: 20
            size_hint: (0.27, 0.2)
            pos_hint: {'center_x': 0.33, 'y': 0.09}

        Button:
            id: btn_login
            text: "Entre aqui"
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: 20
            size_hint: (None, None)
            width: 140
            height: 25
            pos_hint: {'center_x': 0.73, 'y': 0.172}
            background_normal: ''  # Remove a textura padrão
            background_down: ''    # Remove a textura quando pressionado
            background_color: 0, 0, 0, 0  # Torna o fundo completamente transparente
            color: (0.1, 0.1, 0.1, 1)
            on_press:
                root.manager.current = "TelaLogin"
                root.manager.transition.direction = "right"

<TelaSelecionarImagem>:
    id: seletor_imagem
    FloatLayout:
        Image:
            source: 'assets/imagens/fundo-gradiente.png'
            allow_stretch: True
            keep_ratio: False
            size_hint: 1, 1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        Image:
            id: my_image
            source: ""
            size_hint: (0.6, 0.3)
            pos_hint: {'center_x': 0.5, 'top': 0.89}

        FileChooserIconView:
            id: filechooser
            path: 'C:/Users'  # Exemplo de caminho para a pasta de imagens do usuário
            filters: ['*.png', '*.jpg', '*.jpeg']  # Exibir apenas imagens PNG e JPEG
            size_hint: (0.9, 0.3)
            pos_hint: {'center_x': 0.5, 'y': 0.24}
            on_selection: seletor_imagem.mostrar_imagem(filechooser.selection)
        
        Button:
            text: "Selecionar"
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: 18
            size_hint: (None, None)
            width: 180
            height: 45
            pos_hint: {'center_x': 0.5, 'y': 0.16}
            on_press: seletor_imagem.selected(filechooser.selection)
        
        Button:
            text: "Voltar"
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: 18
            size_hint: (None, None)
            width: 180
            height: 45
            pos_hint: {'center_x': 0.5, 'y': 0.09}
            on_press:
                root.manager.current = "TelaCadastro"
                root.manager.transition.direction = "right"

<TelaBemVindo>:
    name: "TelaHome"
    FloatLayout:
        Image:
            source: 'assets/imagens/fundo-gradiente.png'
            allow_stretch: True
            keep_ratio: False
            size_hint: 1, 1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        Label:
            text: "Bem vindo(a),"
            font_name: "assets/fontes/montserrat/Montserrat-Regular.ttf"
            font_size: 22
            size_hint: (0.5, 0.2)
            halign: "center"
            pos_hint: {'center_x': 0.5, 'y': 0.51}

        Label:
            id: lbl_transicao
            text: ""
            font_name: "assets/fontes/montserrat/Montserrat-Bold.ttf"
            font_size: 28
            size_hint: (0.5, 0.2)
            halign: "center"
            pos_hint: {'center_x': 0.5, 'y': 0.42}


<TelaHome>:
    name: "TelaHome"
    FloatLayout:
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Cor branca (RGBA)
            Rectangle:
                pos: self.pos
                size: self.size